#
# bmi_portals makefile 
#

ifneq (,$(BUILD_PORTALS))

DIR := src/io/bmi/bmi_portals
cfiles := portals.c dlmalloc.c portals_comm.c portals_conn.c portals_fc.c portals_helpers.c portals_wrappers.c

src := $(patsubst %,$(DIR)/%,$(cfiles))
LIBSRC    += $(src)
SERVERSRC += $(src)
LIBBMISRC += $(src)

cflags := -DMSPACES -DONLY_MSPACES
ifdef GNUC
cflags += -W -Wcast-qual -Wwrite-strings -Wno-unused -I./ -DMSPACES -DONLY_MSPACES
endif

MODCFLAGS_$(DIR) := $(cflags)

ifneq (,@PORTALS_INCS@)
MODCFLAGS_$(DIR)/portals.c := @PORTALS_INCS@
endif

endif  # BUILD_PORTALS
